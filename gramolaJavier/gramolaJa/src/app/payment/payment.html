<div class="payment-container">
  <div class="payment-card">
    <div class="card-header">
      <div class="success-icon">✓</div>
      <h2 class="payment-title">¡Cuenta Confirmada!</h2>
      <p class="payment-subtitle">Tu email ha sido verificado exitosamente</p>
    </div>

    <div class="payment-info">
      <div class="info-row">
        <span class="info-label">📧 Email confirmado:</span>
        <span class="info-value">{{ email }}</span>
      </div>
    </div>

    <div class="payment-section">
      <h3>Selecciona tu Suscripción</h3>
      <p class="payment-description">
        Elige el plan que mejor se adapte a tus necesidades.
        El pago se procesa de forma segura con Stripe.
      </p>

      <!-- OPCIONES DE SUSCRIPCIÓN -->
      <div class="subscription-options">
        <div 
          class="subscription-card"
          [class.selected]="selectedSubscription === 'monthly'"
          (click)="selectedSubscription = 'monthly'">
          <div class="subscription-badge">Recomendado</div>
          <div class="subscription-title">📅 Mensual</div>
          <div class="subscription-price">{{ prices.monthly.amount }}€</div>
          <div class="subscription-period">/ mes</div>
          <ul class="subscription-features">
            <li>✓ Pruébalo sin compromiso</li>
            <li>✓ Cancela cuando quieras</li>
            <li>✓ Renovación automática</li>
          </ul>
        </div>

        <div 
          class="subscription-card"
          [class.selected]="selectedSubscription === 'annual'"
          (click)="selectedSubscription = 'annual'">
          <div class="subscription-badge savings">¡Ahorra 17%!</div>
          <div class="subscription-title">📆 Anual</div>
          <div class="subscription-price">{{ prices.annual.amount }}€</div>
          <div class="subscription-period">/ año</div>
          <ul class="subscription-features">
            <li>✓ 2 meses gratis</li>
            <li>✓ Ahorra 60€ al año</li>
            <li>✓ Pago único anual</li>
          </ul>
        </div>
      </div>

      <ul class="features-list">
        <li>🎵 Reproducción ilimitada</li>
        <li>🎸 Integración con Spotify</li>
        <li>📊 Estadísticas en tiempo real</li>
        <li>🔧 Soporte técnico 24/7</li>
      </ul>

      <!-- BOTÓN INICIAL -->
      <button 
        *ngIf="!transactionDetails"
        class="payment-button" 
        (click)="prepay()"
        [disabled]="loading">
        <span class="button-text">
          {{ loading ? 'Preparando pago...' : '💳 Ir al Pago' }}
        </span>
      </button>

      <!-- FORMULARIO DE STRIPE -->
      <form id="payment-form" style="display: none;">
        <div id="card-element" class="stripe-card-element"></div>
        <div id="card-error" class="card-error"></div>
        
        <button 
          id="submit-payment"
          type="submit" 
          class="payment-button">
          <span class="button-text">💳 Pagar Ahora</span>
        </button>
      </form>

      <button 
        *ngIf="!transactionDetails"
        class="cancel-button" 
        (click)="goToRegister()">
        Cancelar y volver
      </button>
    </div>

    <div class="security-badge">
      <span class="badge-icon">🔒</span>
      <span class="badge-text">Pago seguro procesado por Stripe</span>
    </div>
  </div>
</div>