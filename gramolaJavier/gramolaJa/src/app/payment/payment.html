<div class="payment-container">
  <div class="payment-card">
    <div class="card-header">
      <div class="success-icon">âœ“</div>
      <h2 class="payment-title">Â¡Cuenta Confirmada!</h2>
      <p class="payment-subtitle">Tu email ha sido verificado exitosamente</p>
    </div>

    <div class="payment-info">
      <div class="info-row">
        <span class="info-label">ðŸ“§ Email confirmado:</span>
        <span class="info-value">{{ email }}</span>
      </div>
    </div>

    <div class="payment-section">
      <h3>Selecciona tu SuscripciÃ³n</h3>
      <p class="payment-description">
        Elige el plan que mejor se adapte a tus necesidades.
        El pago se procesa de forma segura con Stripe.
      </p>

      <!-- OPCIONES DE SUSCRIPCIÃ“N -->
      <div class="subscription-options">
        <div 
          class="subscription-card"
          [class.selected]="selectedSubscription === 'monthly'"
          (click)="selectedSubscription = 'monthly'">
          <div class="subscription-badge">Recomendado</div>
          <div class="subscription-title">ðŸ“… Mensual</div>
          <div class="subscription-price">{{ prices.monthly.amount }}â‚¬</div>
          <div class="subscription-period">/ mes</div>
          <ul class="subscription-features">
            <li>âœ“ PruÃ©balo sin compromiso</li>
            <li>âœ“ Cancela cuando quieras</li>
            <li>âœ“ RenovaciÃ³n automÃ¡tica</li>
          </ul>
        </div>

        <div 
          class="subscription-card"
          [class.selected]="selectedSubscription === 'annual'"
          (click)="selectedSubscription = 'annual'">
          <div class="subscription-badge savings">Â¡Ahorra 17%!</div>
          <div class="subscription-title">ðŸ“† Anual</div>
          <div class="subscription-price">{{ prices.annual.amount }}â‚¬</div>
          <div class="subscription-period">/ aÃ±o</div>
          <ul class="subscription-features">
            <li>âœ“ 2 meses gratis</li>
            <li>âœ“ Ahorra 60â‚¬ al aÃ±o</li>
            <li>âœ“ Pago Ãºnico anual</li>
          </ul>
        </div>
      </div>

      <ul class="features-list">
        <li>ðŸŽµ ReproducciÃ³n ilimitada</li>
        <li>ðŸŽ¸ IntegraciÃ³n con Spotify</li>
        <li>ðŸ“Š EstadÃ­sticas en tiempo real</li>
        <li>ðŸ”§ Soporte tÃ©cnico 24/7</li>
      </ul>

      <!-- BOTÃ“N INICIAL -->
      <button 
        *ngIf="!transactionDetails"
        class="payment-button" 
        (click)="prepay()"
        [disabled]="loading">
        <span class="button-text">
          {{ loading ? 'Preparando pago...' : 'ðŸ’³ Ir al Pago' }}
        </span>
      </button>

      <!-- FORMULARIO DE STRIPE -->
      <form id="payment-form" style="display: none;">
        <div id="card-element" class="stripe-card-element"></div>
        <div id="card-error" class="card-error"></div>
        
        <button 
          id="submit-payment"
          type="submit" 
          class="payment-button">
          <span class="button-text">ðŸ’³ Pagar Ahora</span>
        </button>
      </form>

      <button 
        *ngIf="!transactionDetails"
        class="cancel-button" 
        (click)="goToRegister()">
        Cancelar y volver
      </button>
    </div>

    <div class="security-badge">
      <span class="badge-icon">ðŸ”’</span>
      <span class="badge-text">Pago seguro procesado por Stripe</span>
    </div>
  </div>
</div>