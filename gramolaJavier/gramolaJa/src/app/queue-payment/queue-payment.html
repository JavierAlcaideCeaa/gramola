<div class="modal-overlay" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    
    <!-- Header -->
    <div class="modal-header">
      <h2>ğŸµ Pagar para Encolar</h2>
      <button class="close-btn" (click)="closeModal()">âœ•</button>
    </div>
    
    <!-- Track Info -->
    <div class="track-info" *ngIf="track">
      <img [src]="track.album.images[0]?.url" alt="Album cover">
      <div class="track-details">
        <p class="track-name">{{ track.name }}</p>
        <p class="track-artist">{{ track.artists[0].name }}</p>
      </div>
    </div>
    
    <!-- Email (readonly) -->
    <div class="form-group">
      <label>ğŸ“§ Email</label>
      <input type="email" [value]="email" readonly class="readonly-input">
    </div>
    
    <!-- SelecciÃ³n de Precio -->
    <div class="price-selection" *ngIf="!showStripeForm">
      <h3>ğŸ’° Selecciona un Precio</h3>
      
      <label class="price-option" [class.selected]="selectedPrice === 199">
        <input type="radio" name="price" [value]="199" [(ngModel)]="selectedPrice">
        <div class="price-card">
          <span class="price-amount">1.99â‚¬</span>
          <span class="price-label">Standard</span>
        </div>
      </label>
      
      <label class="price-option" [class.selected]="selectedPrice === 299">
        <input type="radio" name="price" [value]="299" [(ngModel)]="selectedPrice">
        <div class="price-card">
          <span class="price-amount">2.99â‚¬</span>
          <span class="price-label">Premium</span>
        </div>
      </label>
    </div>
    
    <!-- BotÃ³n de Pago Inicial -->
    <button 
      *ngIf="!showStripeForm"
      class="pay-btn" 
      (click)="processPayment()"
      [disabled]="loading">
      {{ loading ? 'â³ Preparando...' : 'ğŸ’³ Continuar al Pago' }}
    </button>
    
    <!-- Formulario de Stripe -->
    <div class="stripe-form" *ngIf="showStripeForm">
      <h3>ğŸ’³ InformaciÃ³n de Pago</h3>
      <div id="queue-card-element" class="card-element"></div>
      <div id="queue-card-error" class="card-error"></div>
      
      <button 
        class="pay-btn" 
        (click)="confirmPayment()"
        [disabled]="loading">
        {{ loading ? 'â³ Procesando...' : 'âœ… Confirmar Pago' }}
      </button>
    </div>
    
    <!-- Stripe Badge -->
    <div class="stripe-badge">
      <span>ğŸ”’</span>
      <span>Pago seguro con Stripe</span>
    </div>
    
  </div>
</div>